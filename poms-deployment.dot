digraph poms_universe {

    label="Deployments relevant for POMS";

    poms_gui [ label="POMS" href="https://poms.omroep.nl/"];
    poms_backend [ label="POMS backend API" href="https://api.poms.omroep.nl/"];
    api [ label = "NPO Frontend API" href="https://rs.poms.omroep.nl/"];
    pages_publish [ label = "Pages Publisher"     href="https://publish.pages.omroep.nl/"];
    media_publish [ label = "Media Publisher"     href="https://publish.pages.omroep.nl/"];


    subgraph cluster_0  {
        label="Generic backend services";
        postgresql; elasticsearch; sso; jms; ldap;
    }

    subgraph cluster_1  {
        label="VPRO";
        magnolia_frontend; magnolia_backend;
    }

    subgraph cluster_1  {
        label="World";
        users; backendsystems; editors;
    }
    subgraph cluster_3  {
        label="POMS Public Services";
        poms_gui; poms_backend; pages_publish; api;
    }


   editors -> {magnolia_backend poms_gui sso}
   users -> {magnolia_frontend api}
   backendsystems -> {poms_backend  pages_publish}


    poms_gui -> { postgresql jms sso ldap }

    poms_backend -> { jms ldap}

    api -> { elasticsearch }

    pages_publish-> { elasticsearch ldap}

    media_publish -> { elasticsearch jms }


    magnolia_backend -> { poms_backend pages_publish };

    magnolia_frontend -> { api  };

   sso -> ldap;

}
